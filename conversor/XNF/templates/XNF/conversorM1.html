<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>TK2 | ɹosɹǝʌuoƆ</title>

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/conversor.css" rel="stylesheet" type="text/css">
        <!-- Data Tables -->
    <link href="/static/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="/static/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
    <link href="/static/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">

</head>

<body>

<!-- Mainly scripts -->
<script src="/static/js/jquery-2.1.1.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

<!-- Custom and plugin javascript -->
<script src="/static/js/inspinia.js"></script>
<script src="/static/js/plugins/pace/pace.min.js"></script>
 <!-- Data Tables -->
<script src="/static/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/static/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/static/js/plugins/dataTables/dataTables.responsive.js"></script>
<!-- Page-Level Scripts -->
    <script>
        $(document).ready(function() {
            $('.dataTables-example').dataTable({
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                }
            });

            /* Init DataTables */
            var oTable = $('#editable').dataTable();

            /* Apply the jEditable handlers to the table */
            oTable.$('td').editable( '../example_ajax.php', {
                "callback": function( sValue, y ) {
                    var aPos = oTable.fnGetPosition( this );
                    oTable.fnUpdate( sValue, aPos[0], aPos[1] );
                },
                "submitdata": function ( value, settings ) {
                    return {
                        "row_id": this.parentNode.getAttribute('id'),
                        "column": oTable.fnGetPosition( this )[2]
                    };
                },

                "width": "90%",
                "height": "100%"
            } );


        });

        function fnClickAddRow() {
            $('#editable').dataTable().fnAddData( [
                "Custom row",
                "New row",
                "New row",
                "New row",
                "New row" ] );

        }
    </script>

<div id="wrapper">


    {% include "XNF/sidebar.html" %}
    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            {% include "XNF/topbar.html" %}
        </div>
        {% if user.is_authenticated %}
            {% for group in user.groups.all %}
                {% if group.name == 'conversor' %}
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5><small class="m-l-sm"><img src="/static/img/logoxnf.svg" height="12"> a edx</small> sosɹnɔ ǝp uóᴉsɹǝʌuoɔ ǝp ɐʇuǝᴉɯɐɹɹǝH</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <p>
                                 <a href="/static/data/templateXNF.xlsm"><img src="/static/img/logoxnf.svg" height="12"> ínbɐ ǝslnd <i class="fa fa-cloud-download"></i>.</a> lǝp ɐllᴉʇuɐld ɐl ɹɐƃɹɐɔsǝp ɐɹɐԀ ˙Xpǝ uǝ osɹnɔ nʇ uǝ ɹɐʇɹodɯᴉ sǝpǝnd ol ǝʇuɐʇlnsǝɹ oɹǝɥɔᴉɟ lƎ
                                ˙osǝɔoɹd ǝʇsǝ ǝʇuɐɹnp ɹopɐƃǝʌɐu lǝ sǝɹɹǝᴉɔ ou ɹoʌɐɟ ɹoԀ
                                ˙uóᴉsɹǝʌuoɔ ɐl ɐzᴉlɐǝɹ ǝs oʇsǝ sɐɹʇ ʎ ɹopᴉʌɹǝs lɐ oʌᴉɥɔɹɐ lǝ ǝqns ǝs ɐdɐʇǝ ɐɹǝɯᴉɹd ɐl uǝ 'sɐdɐʇǝ ᄅ ǝp ɐʇsuoɔ uóᴉsɹǝʌuoɔ ǝp osǝɔoɹd lƎ
                                ˙(dᴉZ ∩Nפ uoɔ opᴉɯᴉɹdɯoɔ ɹɐʇ˙ oɹǝɥɔᴉɟ un 'ɹᴉɔǝp sǝ) ǝʇuɐʇlnsǝɹ xpǝ ǝp ǝʇǝnbɐd lǝ ɐƃɹɐɔsǝp ɐɹɐd áɹǝɔǝɹɟo ǝʇ ǝs soʇuǝɯoɯ soun sɐɹʇ ʎ ɹᴉʇɹǝʌuoɔ sɐǝsǝp ǝnb lǝɔxǝ ǝp oʌᴉɥɔɹɐ lǝ ɐuoᴉɔɔǝlǝS
                                ˙Xpǝ ǝp soʇɐp ǝp oʇɐɯɹoɟ lɐ <img src="/static/img/logoxnf.svg" height="12"> oʇɐɯɹoɟ uoɔ lǝɔxǝ uǝ soʌᴉɥɔɹɐ ɹᴉʇɹǝʌuoɔ ɐɹɐd ǝʌɹᴉs ɐʇuǝᴉɯɐɹɹǝɥ ɐʇsƎ
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class ="row animated fadeInRight">
                <div class="col-md-4">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Xpǝ ɹᴉʇɹǝʌuoƆ</h5>
                        </div>
                            <div class="ibox-content text-center border-left-right">
                                <form action="{% url "conversor" %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <p>{{ form.non_field_errors }}</p>
                                    <p>
                                        <div class="spiner-example" id="uploadimg" hidden="true">
                                            Convirtiendo
                                            <div class="sk-spinner sk-spinner-cube-grid">
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                                <div class="sk-cube"></div>
                                            </div>
                                        </div>
                                    <div id="uploadbtn">
                                        <p>{{ form.input_excel.help_text | safe}} </p>
                                        <p>
                                            {{ form.input_excel.errors }}
                                            <div class="btn btn-primary btn-large" onclick="realupload()">
                                                <span><i class="fa fa-cloud-upload"></i>oʌᴉɥɔɹɐ lǝ ɹɐuoᴉɔɔǝlǝS</span>
                                            </div>

                                                {{ form.input_excel }}
                                        </p>
                                    </div>


                                    <p><input id="convertir" class="invisible" type="submit" value="Convertir" /></p>
                                </form>
                            </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="ibox float-e-margins">

                    <div class="ibox-title">
                        <h5>Conversiones antiguas</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                    <table class="table table-striped table-bordered table-hover dataTables-example" >
                    <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Usuario</th>
                        <th>Nombre</th>
                        <th>Resultado</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for curso in targz%}
                        <tr>
                            <td>{{curso.lastmodified}}</td>
                            <td>{{curso.user}}</td>
                            <td>{{curso.name}}</td>
                            <td "text-center link-block"><a href="/static/{{curso.user}}/{{curso.name}}/{{curso.name}}.tar.gz"><i class="fa fa-cloud-download"></i>Descargar</a></td>
                        </tr>
                    {% endfor %}

                    </tbody>
                    <tfoot>
                    <tr>
                        <th>Fecha</th>
                        <th>Usuario</th>
                        <th>Nombre</th>
                        <th>Resultado</th>
                    </tr>
                    </tfoot>
                    </table>

                    </div>

                    </div>
                </div>
            </div>


        </div>
        {% endif %}
        {% endfor %}
        {% else %}
            {% include "XNF/unauthorized.html" %}
        {% endif %}
        {% include "XNF/footer.html" %}

    </div>
</div>
</body>
<script>
function activatefilter(check){
console.log("adsfa");
    if (check.checked)
    {
        $("#query_filter").removeAttr("disabled")
    }
    else
    {
        $("#query_filter").attr("disabled","true")
        $("#query_filter").val("")
    }

}

function realupload() {
    document.getElementById("uploadimg").hidden=false;
    document.getElementById("uploadbtn").hidden=true;
    document.getElementById("id_input_excel").click();
}
function convert() {
    document.getElementById("convertir").click();
}
</script>
</html>
